<script>
    window.addEventListener('load', () => {
        var cty = document.getElementById('bar-chart');

        var bar = new Chart(cty, {
            type: 'bar',
            data: {
                labels: [
                    'Acousticness',
                    'Danceability',
                    'Energy',
                    'Instrumentalness',
                    'Valence'
                ],
                datasets: [
                    {
                        label: 'Audio Feature',
                        data: {{ audioFeatures }},
                        color: 'rgb(256,256,256)',
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.4)',
                            'rgba(255, 159, 64, 0.4)',
                            'rgba(255, 205, 86, 0.4)',
                            'rgba(75, 192, 192, 0.4)',
                            'rgba(54, 162, 235, 0.4)',
                            'rgba(153, 102, 255, 0.4)',
                            'rgba(201, 203, 207, 0.4)',
                        ],
                        borderColor: [
                            'rgb(255, 99, 132)',
                            'rgb(255, 159, 64)',
                            'rgb(255, 205, 86)',
                            'rgb(75, 192, 192)',
                            'rgb(54, 162, 235)',
                            'rgb(153, 102, 255)',
                            'rgb(201, 203, 207)',
                        ],
                        borderWidth: 1,
                    },
                ],
            },
            options: {
                title: {
                    display: true,
                    text: 'Average Audio Feature accross your Taste',
                },
                plugins: {
                    legend: {
                        display: false, // Stopepd displaying the label
                        labels: {
                            color: 'white',
                        },
                    },
                    tooltip: {
                        callbacks: {
                            label: function (tooltipItem) {
                                let descriptions = {
                                    'Acousticness': 'A confidence measure of whether the track is acoustic.',
                                    'Danceability': 'Danceability describes how suitable a track is for dancing based on a combination of musical elements including tempo, rhythm stability, beat strength, and overall regularity.',
                                    'Energy': 'A perceptual measure of intensity and activity. ',
                                    'Instrumentalness': 'Predicts whether a track contains no vocals.',
                                    'Valence':'A measure describing the musical positiveness conveyed by a track.',
                                }
                                const returnValue = [];
                                returnValue.push(tooltipItem.formattedValue);
                                returnValue.push(descriptions[tooltipItem.label]);
                                return returnValue;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        ticks: {
                            color: 'rgb(256,256,256)',
                        },
                    },
                    x: {
                        ticks: {
                            color: 'rgb(256,256,256)',
                        },
                    },
                },
                maintainAspectRatio: false,
                indexAxis: 'y'
            },
        });
    })
</script>
